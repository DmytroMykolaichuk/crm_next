(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[572],{9549:function(e,t,r){Promise.resolve().then(r.bind(r,2006))},3145:function(e,t,r){"use strict";r.d(t,{default:function(){return o.a}});var n=r(8461),o=r.n(n)},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},8461:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return s},getImageProps:function(){return i}});let n=r(7043),o=r(5346),a=r(5878),c=n._(r(5084));function i(e){let{props:t}=(0,o.getImgProps)(e,{defaultLoader:c.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let s=a.Image},2006:function(e,t,r){"use strict";r.d(t,{default:function(){return i}});var n=r(7437);r(2265);var o=r(8970),a=r(502),c=r(9376);function i(e){let{id:t,nameCompany:r}=e,i=(0,c.useRouter)();async function s(e){e.preventDefault();let{avatar:n,title:o,discount:c,description:s}=e.currentTarget.elements,u={avatar:n.value,description:s.value,companyTitle:r,title:o.value,discount:+c.value||0,companyId:t};try{await (0,a.sp)(u);let e=await (0,a.Ej)(t);await (0,a.ht)(e),i.push("/companies/".concat(t,"?reload=true"))}catch(e){console.error("Error submitting form:",e)}}return(0,n.jsxs)("form",{onSubmit:s,children:[(0,n.jsx)("h1",{className:"font-semibold text-xl mb-[12px]",children:"Add promotion"}),(0,n.jsxs)("div",{className:"flex flex-col gap-3 text-base mb-3",children:[(0,n.jsxs)("label",{className:"flex flex-col gap-1",children:["Title",(0,n.jsx)("input",{name:"title",type:"text",className:"py-3 px-3 rounded border shadow  min-w-[308px]",placeholder:"Title",required:!0,autoFocus:!0})]}),(0,n.jsxs)("label",{className:"flex flex-col gap-2",children:["Description",(0,n.jsx)("input",{name:"description",type:"text",className:"py-3 px-3 rounded border shadow min-w-[308px]",placeholder:"Description",required:!0})]}),(0,n.jsxs)("label",{className:"flex flex-col gap-2",children:["Discount amount",(0,n.jsx)("input",{name:"discount",type:"text",className:"py-3 px-3 rounded border shadow min-w-[308px]",placeholder:"40",required:!0})]}),(0,n.jsx)(o.Z,{type:"Image"})]}),(0,n.jsx)("button",{type:"submit",className:"py-[10px] font-medium text-base w-full bg-[#111827] text-zinc-50 rounded",children:"Add company"})]})}},8970:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(7437),o=r(2265),a=r(3145),c=r(1994);function i(e){let{type:t}=e,[r,i]=(0,o.useState)(null);return(0,n.jsxs)("div",{className:"flex justify-center items-center row-span-2 relative",children:[!t&&(0,n.jsx)("p",{className:"absolute top-0 left-0 text-base color-gray-900",children:"Logo"}),(0,n.jsxs)("label",{className:(0,c.Z)("flex flex-col items-center justify-center  bg-white border border-slate-900 border-dashed cursor-pointer",t?"w-full h-[184px] rounded":"w-48 h-full rounded-full"),children:[r?(0,n.jsx)("img",{src:r,alt:"Uploaded logo",className:(0,c.Z)("object-cover",!t&&"rounded-full"),style:{width:"100%",height:"100%"}}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.default,{className:"mb-1",width:48,height:48,src:"/icon/upload.svg",alt:"upload"}),(0,n.jsx)("p",{className:"text-base text-gray-500 text-start",children:"Upload photo"})]}),(0,n.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&i(URL.createObjectURL(r))},className:"hidden",name:"avatar"})]})]})}},502:function(e,t,r){"use strict";r.d(t,{Ej:function(){return c},ap:function(){return a},e5:function(){return s},ht:function(){return l},oq:function(){return i},qA:function(){return f},sp:function(){return u}});let n="65c21c4ff7e6ea59682aa7e1";async function o(e){try{let t=await fetch("https://".concat(n,".mockapi.io/api/v1/").concat(e));if(!t.ok){if(404===t.status)return[];throw Error("Error fetching ".concat(e,": ").concat(t.statusText))}return await t.json()}catch(t){throw console.error(t),Error("Failed to fetch data from ".concat(e))}}async function a(){return o("companies")}async function c(e){return o("companies/".concat(e))}async function i(e){return o("promotions?companyId=".concat(e))}async function s(e){try{let t=await fetch("https://".concat(n,".mockapi.io/api/v1/companies"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Error submitting form.");return await t.json()}catch(e){throw console.error("Error submitting form.",e),e}}async function u(e){try{if(!(await fetch("https://".concat(n,".mockapi.io/api/v1/promotions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Error creating promo")}catch(e){console.error("Error creating promo:",e)}}async function l(e){try{if(!(await fetch("https://".concat(n,".mockapi.io/api/v1/companies/").concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,hasPromotions:!0})})).ok)throw Error("Error change company")}catch(e){console.error("Error chenging company:",e)}}async function f(e){try{if(!(await fetch("https://".concat(n,".mockapi.io/api/v1/promotions/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)throw Error("Error change company")}catch(e){console.error("Error deleting promotion:",e)}}},1994:function(e,t,r){"use strict";t.Z=function(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=function e(t){var r,n,o="";if("string"==typeof t||"number"==typeof t)o+=t;else if("object"==typeof t){if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(n=e(t[r]))&&(o&&(o+=" "),o+=n)}else for(n in t)t[n]&&(o&&(o+=" "),o+=n)}return o}(e))&&(n&&(n+=" "),n+=t);return n}}},function(e){e.O(0,[878,971,117,744],function(){return e(e.s=9549)}),_N_E=e.O()}]);